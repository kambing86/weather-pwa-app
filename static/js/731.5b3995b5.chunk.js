"use strict";(self.webpackChunkweather_pwa_app=self.webpackChunkweather_pwa_app||[]).push([[731],{6232:(e,n,t)=>{t.d(n,{A:()=>i});var a=t(5043),r=t(579);const o=e=>{let{countryCode:n,fontSize:t}=e;return(0,r.jsx)("span",{style:{fontSize:t,margin:5},className:"fi fi-".concat(n.toLowerCase())})},i=(0,a.memo)(o)},5731:(e,n,t)=>{t.d(n,{A:()=>q});var a=t(7051),r=t(5865),o=t(2110),i=t(6494),s=t(8587),l=t(8168),c=t(5043),d=t(8387),u=t(8610),m=t(4535),g=t(8206),p=t(2532),f=t(2372);function A(e){return(0,f.Ay)("MuiCardActions",e)}(0,p.A)("MuiCardActions",["root","spacing"]);var h=t(579);const x=["disableSpacing","className"],v=(0,m.Ay)("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:t}=e;return[n.root,!t.disableSpacing&&n.spacing]}})((e=>{let{ownerState:n}=e;return(0,l.A)({display:"flex",alignItems:"center",padding:8},!n.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})})),j=c.forwardRef((function(e,n){const t=(0,g.b)({props:e,name:"MuiCardActions"}),{disableSpacing:a=!1,className:r}=t,o=(0,s.A)(t,x),i=(0,l.A)({},t,{disableSpacing:a}),c=(e=>{const{classes:n,disableSpacing:t}=e,a={root:["root",!t&&"spacing"]};return(0,u.A)(a,A,n)})(i);return(0,h.jsx)(v,(0,l.A)({className:(0,d.A)(c.root,r),ownerState:i,ref:n},o))}));var w=t(1906),C=t(4208),b=t(4493),y=t(8136),N=t(1191),S=t(2567),k=t(3166),F=t(9099),M=t(3216),R=t(7671),L=t(6232),T=t(9650),I=t(3336),B=t(1806),_=t(4882),D=t(8076),J=t(39),O=t(3460);const P="radial-gradient(circle at center, rgba(80%, 80%, 80%, 0.8) 0, #1e1e1e 75%)",z="radial-gradient(circle at center, rgba(20%, 20%, 20%, 0.8) 0, #fff 75%)",W=(0,y.A)((e=>({iconBackground:{background:e.palette.mode===R.nd?P:z},table:{minWidth:200,"& .MuiTableCell-root":{padding:e.spacing(.5),[e.breakpoints.up("sm")]:{padding:e.spacing(2)}}},weatherText:{display:"flex",alignItems:"center",justifyContent:"center"}}))),E=e=>{let{data:n}=e;const t=W();return(0,h.jsx)(T.A,{component:I.A,children:(0,h.jsxs)(B.A,{className:t.table,"aria-label":"simple table",children:[(0,h.jsx)(_.A,{children:(0,h.jsxs)(D.A,{children:[(0,h.jsx)(J.A,{align:"center",children:"Date / Time"}),(0,h.jsx)(J.A,{align:"center",children:"Weather"}),(0,h.jsx)(J.A,{align:"center",children:"Precipitation (%)"}),(0,h.jsx)(J.A,{align:"center",children:"Min temp (\xb0C)"}),(0,h.jsx)(J.A,{align:"center",children:"Max temp (\xb0C)"})]})}),(0,h.jsx)(O.A,{children:n.list.map((e=>{const n=new Date(1e3*e.dt),a=e.weather[0];return(0,h.jsxs)(D.A,{children:[(0,h.jsx)(J.A,{align:"center",children:new Intl.DateTimeFormat("en-US",{dateStyle:"medium",timeStyle:"full"}).format(n)}),(0,h.jsx)(J.A,{align:"center",children:(0,h.jsxs)(r.A,{className:t.weatherText,children:[(0,h.jsx)("img",{src:"https://openweathermap.org/img/wn/".concat(a.icon,".png"),alt:a.description,className:t.iconBackground}),a.description]})}),(0,h.jsx)(J.A,{align:"center",children:"".concat(100*e.pop,"%")}),(0,h.jsx)(J.A,{align:"center",children:e.main.temp_max}),(0,h.jsx)(J.A,{align:"center",children:e.main.temp_min})]},e.dt)}))})]})})},G=(0,c.memo)(E),U=(0,y.A)((e=>({root:{display:"flex",overflow:"auto",flexDirection:"column",backgroundColor:e.palette.mode===R.nd?"#333":"#f5f5f5",[e.breakpoints.up("sm")]:{padding:e.spacing(2)}},name:{display:"flex",alignItems:"center"},iconBackground:{background:e.palette.mode===R.nd?P:z},divider:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},tableTitle:{marginBottom:e.spacing(1)},weatherText:{display:"flex",alignItems:"center"}}))),$=()=>{const e=U(),{weatherData:n,isInit:t,isLoading:s,isLocationFound:l,location:d}=(0,F.U)(),{location:u}=(0,M.g)(),{isFavorite:m,clickFavorite:g,getNameFromFavorite:p}=(0,k.A)(),f=(0,c.useMemo)((()=>p(u)),[p,u]),A=(0,c.useMemo)((()=>null==d?null:(0,a.A)((0,a.A)({},d),{},{name:null!==f&&void 0!==f?f:d.name})),[d,f]),x=n.data,v=null===x||void 0===x?void 0:x.current,y=null===x||void 0===x?void 0:x.forecast,R=(0,S.t)(A),T=(0,c.useCallback)((()=>{null!=R.current&&g(R.current)}),[R,g]),I=(0,c.useMemo)((()=>null!=A?(0,N.BJ)(A.country):null),[A]);return t?s?(0,h.jsx)(r.A,{children:"Loading..."}):(0,h.jsx)(o.A,{className:e.root,children:(0,h.jsxs)(i.A,{children:[!l&&(0,h.jsx)(r.A,{children:"Location not found"}),l&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(j,{children:[(0,h.jsxs)(r.A,{className:e.name,children:[null!==f&&void 0!==f?f:null===A||void 0===A?void 0:A.name,null!=I&&(null===A||void 0===A?void 0:A.name)!==I.name&&" - ".concat(I.name),null!=A&&(0,h.jsx)(L.A,{countryCode:A.country,fontSize:"2rem"})]}),(0,h.jsx)(w.A,{size:"small",onClick:T,children:null!=A&&m(A)?(0,h.jsx)(C.A,{sx:{color:"#f50057"},children:"favorite"}):(0,h.jsx)(C.A,{sx:{color:"#f50057"},children:"favorite_border"})})]}),n.error&&(0,h.jsx)(r.A,{children:JSON.stringify(n.error)}),v&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(r.A,{className:e.weatherText,children:[(0,h.jsx)("img",{src:"https://openweathermap.org/img/wn/".concat(v.weather[0].icon,".png"),alt:v.weather[0].description,className:e.iconBackground}),v.weather[0].description]}),(0,h.jsxs)(r.A,{children:["Temperature: ",v.main.temp," \xb0C"]})]}),(0,h.jsx)(b.A,{className:e.divider}),y&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(r.A,{className:e.tableTitle,children:"3 hours forecast"}),(0,h.jsx)(G,{data:y})]})]})]})}):null},q=(0,c.memo)($)},3166:(e,n,t)=>{t.d(n,{A:()=>s});var a=t(5043),r=t(9946),o=t(2567);const i="WEATHER_PWA_FAV",s=()=>{const[e,n]=(0,a.useState)((()=>JSON.parse(localStorage.getItem(i)||"[]"))),t=(0,a.useCallback)((e=>{n((n=>{const t=[...n];if("string"===typeof e)t.push(e);else{const{name:n,lat:a,lon:r,country:o}=e;t.push({name:n,lat:a,lon:r,country:o})}return localStorage.setItem(i,JSON.stringify(t)),t}))}),[]),s=(0,a.useCallback)((e=>{n((n=>{const t=[...n],a=(0,r.RB)(t,e);return t.splice(a,1),localStorage.setItem(i,JSON.stringify(t)),t}))}),[]),l=(0,o.t)(e),c=(0,a.useCallback)((e=>(0,r.RB)(l.current,e)>=0),[l]),d=(0,a.useCallback)((e=>{c(e)?s(e):t(e)}),[c,s,t]),u=(0,a.useCallback)((e=>{if(null==e)return null;const n=(0,r.G$)(e);if(null==n)return null;const[t,a]=n,o=l.current.find((e=>"string"!==typeof e&&(e.lat===t&&e.lon===a)));return null===o||void 0===o?void 0:o.name}),[l]);return{favoriteList:e,isFavorite:c,clickFavorite:d,getNameFromFavorite:u}}},9099:(e,n,t)=>{t.d(n,{U:()=>i,L:()=>s});var a=t(5043),r=t(9456);var o=t(7184);const i=()=>{var e;const n=(0,r.wA)(),t=(0,a.useRef)(null),i=(0,r.d4)((e=>e.weather.allData)),s=(0,r.d4)((e=>e.weather.locations)),l=(0,a.useCallback)((e=>{var a;null===(a=t.current)||void 0===a||a.call(t),setTimeout((()=>{!async function(){const a=n(o.jj(e));t.current=a.abort,await a,t.current=null}()}),0)}),[n]),c=(0,a.useCallback)(((e,a)=>{var r;null===(r=t.current)||void 0===r||r.call(t),setTimeout((()=>{!async function(){const r=n(o.q9({latitude:e,longitude:a}));t.current=r.abort,await r,t.current=null}()}),0)}),[n]),d=null===(e=s.data)||void 0===e?void 0:e.at(0);return{weatherData:i,isInit:s.init,isLoading:!s.init||s.loading||!i.init||i.loading,isLocationFound:void 0===s.error,location:d,setLocation:l,setPosition:c}},s=()=>{const{setLocation:e,setPosition:n}=i(),t=(0,a.useRef)(!1),[r,o]=(0,a.useState)(!0);return(0,a.useEffect)((()=>{let e=!1;return navigator.geolocation?navigator.geolocation.getCurrentPosition((a=>{if(e)return;if(o(!1),t.current)return;const{latitude:r,longitude:i}=a.coords;n(r,i)}),(()=>{e||o(!1)}),{timeout:5e3}):o(!1),()=>{e=!0}}),[n]),{isGettingLocation:r,setLocation:(0,a.useCallback)((n=>{t.current=!0,o(!1),e(n)}),[e])}}},9946:(e,n,t)=>{function a(e,n){let t=-1;return"string"===typeof n?t=e.indexOf(n):(t=e.findIndex((e=>"string"!==typeof e&&(e.name===n.name&&e.country===n.country||e.lat===n.lat&&e.lon===n.lon))),-1===t&&(t=e.findIndex((e=>"string"===typeof e&&e===n.name)))),t}function r(e){const n=e.split("|");if(function(e){return 2===e.length&&e.every((e=>function(e){return"string"==typeof e&&!isNaN(e)&&!isNaN(parseFloat(e))}(e)))}(n)){const[e,t]=n;return[parseFloat(e),parseFloat(t)]}return null}t.d(n,{RB:()=>a,G$:()=>r})},2110:(e,n,t)=>{t.d(n,{A:()=>h});var a=t(8168),r=t(8587),o=t(5043),i=t(8387),s=t(8610),l=t(4535),c=t(8206),d=t(3336),u=t(2532),m=t(2372);function g(e){return(0,m.Ay)("MuiCard",e)}(0,u.A)("MuiCard",["root"]);var p=t(579);const f=["className","raised"],A=(0,l.Ay)(d.A,{name:"MuiCard",slot:"Root",overridesResolver:(e,n)=>n.root})((()=>({overflow:"hidden"}))),h=o.forwardRef((function(e,n){const t=(0,c.b)({props:e,name:"MuiCard"}),{className:o,raised:l=!1}=t,d=(0,r.A)(t,f),u=(0,a.A)({},t,{raised:l}),m=(e=>{const{classes:n}=e;return(0,s.A)({root:["root"]},g,n)})(u);return(0,p.jsx)(A,(0,a.A)({className:(0,i.A)(m.root,o),elevation:l?8:void 0,ref:n,ownerState:u},d))}))},6494:(e,n,t)=>{t.d(n,{A:()=>A});var a=t(8168),r=t(8587),o=t(5043),i=t(8387),s=t(8610),l=t(4535),c=t(8206),d=t(2532),u=t(2372);function m(e){return(0,u.Ay)("MuiCardContent",e)}(0,d.A)("MuiCardContent",["root"]);var g=t(579);const p=["className","component"],f=(0,l.Ay)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,n)=>n.root})((()=>({padding:16,"&:last-child":{paddingBottom:24}}))),A=o.forwardRef((function(e,n){const t=(0,c.b)({props:e,name:"MuiCardContent"}),{className:o,component:l="div"}=t,d=(0,r.A)(t,p),u=(0,a.A)({},t,{component:l}),A=(e=>{const{classes:n}=e;return(0,s.A)({root:["root"]},m,n)})(u);return(0,g.jsx)(f,(0,a.A)({as:l,className:(0,i.A)(A.root,o),ownerState:u,ref:n},d))}))}}]);
//# sourceMappingURL=731.5b3995b5.chunk.js.map